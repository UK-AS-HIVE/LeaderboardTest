<head>
  <title>ServiceConnectorDemo</title>
</head>

<body>
  <h1>ServiceConnectorDemo</h1>
  <p>
    A test of integrating social network activity into a Meteor app.
  </p>

  {{#if currentUser}}
    <button id="sign-out-button">Sign out</button>
    {{> linkAccounts}}
  {{else}}
    {{> loginButtons}}
    {{> linkblueLogin}}
  {{/if}}

  {{#if currentUser.services.facebook}}
    {{> feedReader}}
  {{/if}}

  {{#if currentUser.services.google}}
    I see you are a GOOGLE user
  {{/if}}

  {{#if currentUser.services.asana}}
    {{> asanaReader}}
  {{/if}}

</body>

<template name="linkAccounts">
  {{> linkAccount service='facebook'}}
  {{> linkAccount service='github'}}
  {{> linkAccount service='asana'}}
</template>

<template name="linkAccount">
  {{#if notLinkedWith service}}
    <button id="connect-account-{{service}}">Connect your {{service}}</button>
  {{else}}
    Linked to {{service}}!
  {{/if}}
</template>

<template name="feedReader">
  <div>
    <button>Read Facebook feed</button>
    <ul>
    {{#each feedItems}}
      <li>{{story}}</li>
    {{/each}}
    </ul>
  </div>
</template>

<template name="asanaReader">
  <div>
    <button>Read Asana workspaces</button>
    <ul>
    {{#each asanaWorkspaces}}
      <li>{{name}}</li>
    {{/each}}
    </ul>
  </div>
</template>

